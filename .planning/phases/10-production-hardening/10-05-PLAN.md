# Plan 10-05: Pre-existing Stub Implementation

**Phase:** 10 - Production Hardening & Launch Prep
**Priority:** P3 (Nice to have)
**Estimated Scope:** 3 new API routes, 1 page update

---

## Objective

Implement missing API routes that pre-existing UI components fall back to mock data for, and clean up the legacy documents page. These are pre-v1.0 items that weren't in scope for the original MVP but leave rough edges in the product.

---

## Tasks

### Task 1: Implement /api/investor-lens/evaluate

**Issue:** The InvestorLens component calls this endpoint but it doesn't exist, causing fallback to mock data.

**New File:** `app/api/investor-lens/evaluate/route.ts`

**Action:**
1. Create POST handler that accepts startup data
2. Use FRED engine (`generateStructuredReliable`) to evaluate investor readiness
3. Return structured evaluation matching what the component expects
4. Gate behind Pro tier (investor features are Pro+)
5. Follow existing API patterns (requireAuth, try/catch, proper error responses)

### Task 2: Implement /api/positioning/assess

**Issue:** The PositioningAssessment component calls this endpoint but it doesn't exist, causing fallback to mock data.

**New File:** `app/api/positioning/assess/route.ts`

**Action:**
1. Create POST handler that accepts market/product data
2. Use FRED engine to generate positioning assessment
3. Return structured assessment matching component expectations
4. Gate behind appropriate tier
5. Follow existing API patterns

### Task 3: Fix /documents/new Page

**File:** `app/documents/new/page.tsx`

**Issue:** Uses hardcoded mock content instead of real document creation flow.

**Action:**
1. Review what the page is supposed to do (create new strategy documents)
2. Wire to the existing strategy document generation API (`/api/strategy/generate`)
3. Replace mock content with actual form → API → result flow
4. Or remove the page if it duplicates existing strategy docs functionality in dashboard

---

## Verification

- [ ] `/api/investor-lens/evaluate` returns real AI evaluation (not mock)
- [ ] `/api/positioning/assess` returns real AI assessment (not mock)
- [ ] InvestorLens component renders real data
- [ ] PositioningAssessment component renders real data
- [ ] `/documents/new` page either works with real data or is removed
- [ ] All new routes require authentication
- [ ] All new routes have proper tier gating
- [ ] `npx tsc --noEmit` passes
- [ ] `npx vitest run` passes

---

## Dependencies

- Depends on Phase 01 FRED engine (already complete)
- Independent of other 10-xx plans

---

*Plan created: 2026-02-06*
