---
phase: 13-voice-core-ai-engines
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - lib/fred/voice.ts
  - lib/fred/reality-lens.ts
  - lib/fred/irs/engine.ts
  - lib/fred/strategy/generator.ts
  - lib/fred/pitch/analyzers/index.ts
  - lib/fred/actors/decide.ts
  - lib/fred/actors/synthesize.ts
autonomous: true
must_haves:
  truths:
    - "All 5 core AI engines import persona data from fred-brain.ts instead of hardcoding experience numbers"
    - "Reality Lens identifies as Fred Cary (not generic 'FRED' acronym) with 50+ years experience"
    - "Investor Readiness Score engine uses Fred Cary's investor credentials (not generic 'VC analyst')"
    - "Strategy document generator uses FRED_BIO.yearsExperience (not hardcoded '40+ years')"
    - "Pitch deck analyzer uses FRED_BIO.yearsExperience (not hardcoded '30+ years')"
    - "Chat pipeline response templates in decide.ts reference Fred's experience and use his communication style"
    - "A shared voice utility (lib/fred/voice.ts) builds composable Fred preambles from fred-brain.ts exports"
    - "No hardcoded experience year numbers remain in any of the 7 modified files"
  artifacts:
    - path: "lib/fred/voice.ts"
      provides: "Shared Fred Cary voice preamble builder"
      exports: ["buildFredVoicePreamble"]
    - path: "lib/fred/reality-lens.ts"
      provides: "Reality Lens engine with Fred Cary persona"
      exports: ["assessIdea"]
    - path: "lib/fred/irs/engine.ts"
      provides: "IRS engine with Fred Cary investor credentials"
      exports: ["calculateIRS"]
    - path: "lib/fred/strategy/generator.ts"
      provides: "Strategy generator with fred-brain.ts imports"
      exports: ["generateStrategy"]
    - path: "lib/fred/pitch/analyzers/index.ts"
      provides: "Pitch analyzer with fred-brain.ts imports"
      exports: ["analyzeSlide"]
    - path: "lib/fred/actors/decide.ts"
      provides: "Decision actor with Fred Cary voice in response templates"
      exports: ["decideActor"]
    - path: "lib/fred/actors/synthesize.ts"
      provides: "Synthesis actor with Fred Cary voice in recommendations"
      exports: ["synthesizeActor"]
  key_links:
    - from: "lib/fred/voice.ts"
      to: "lib/fred-brain.ts"
      via: "import FRED_BIO, FRED_IDENTITY, FRED_COMMUNICATION_STYLE, FRED_COMPANIES, getExperienceStatement, getCredibilityStatement"
      pattern: "fred-brain"
    - from: "lib/fred/reality-lens.ts"
      to: "lib/fred-brain.ts"
      via: "import FRED_BIO, FRED_IDENTITY, FRED_COMMUNICATION_STYLE, getExperienceStatement, getCredibilityStatement"
      pattern: "fred-brain"
    - from: "lib/fred/irs/engine.ts"
      to: "lib/fred-brain.ts"
      via: "import FRED_BIO, FRED_IDENTITY, FRED_COMPANIES, FRED_COMMUNICATION_STYLE"
      pattern: "fred-brain"
    - from: "lib/fred/strategy/generator.ts"
      to: "lib/fred-brain.ts"
      via: "import FRED_BIO, FRED_COMMUNICATION_STYLE"
      pattern: "fred-brain"
    - from: "lib/fred/pitch/analyzers/index.ts"
      to: "lib/fred-brain.ts"
      via: "import FRED_BIO, FRED_IDENTITY, FRED_COMMUNICATION_STYLE"
      pattern: "fred-brain"
    - from: "lib/fred/actors/decide.ts"
      to: "lib/fred-brain.ts"
      via: "import FRED_BIO"
      pattern: "fred-brain"
    - from: "lib/fred/actors/synthesize.ts"
      to: "lib/fred-brain.ts"
      via: "import FRED_BIO"
      pattern: "fred-brain"
---

<objective>
Unify Fred Cary's voice across the 5 core AI engines (Chat, Reality Lens, Investor Readiness, Strategy Docs, Pitch Deck) by importing persona data from the existing `lib/fred-brain.ts` knowledge base instead of using hardcoded, inconsistent, or generic system prompts.

Purpose: The comprehensive `fred-brain.ts` knowledge base (410 lines) exports structured constants (`FRED_IDENTITY`, `FRED_BIO`, `FRED_COMPANIES`, `FRED_PHILOSOPHY`, `FRED_COMMUNICATION_STYLE`) and helper functions (`getExperienceStatement()`, `getCredibilityStatement()`) -- but none of the five core engines import them. The engines currently use generic personas ("FRED acronym", "expert VC analyst"), wrong experience numbers ("40+ years", "30+ years" instead of "50+ years"), or personality-free template strings. This phase wires the existing knowledge base into all five engines so every user-facing AI interaction speaks unmistakably as Fred Cary.

Output: All 5 core engines import from `fred-brain.ts`, a shared `buildFredVoicePreamble()` utility exists for composable persona injection, and the chat pipeline templates carry Fred's voice.
</objective>

<execution_context>
@/opt/agency-workspace/sierra-fred-carey/.planning/workflows/execute-plan.md
@/opt/agency-workspace/sierra-fred-carey/.planning/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/13-voice-core-ai-engines/13-RESEARCH.md

Key source files:
@lib/fred-brain.ts
@lib/fred/reality-lens.ts
@lib/fred/irs/engine.ts
@lib/fred/strategy/generator.ts
@lib/fred/pitch/analyzers/index.ts
@lib/fred/actors/decide.ts
@lib/fred/actors/synthesize.ts
@lib/ai/prompts.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create voice utility and update structured-output engines (Reality Lens, IRS, Strategy, Pitch)</name>
  <files>
    lib/fred/voice.ts
    lib/fred/reality-lens.ts
    lib/fred/irs/engine.ts
    lib/fred/strategy/generator.ts
    lib/fred/pitch/analyzers/index.ts
  </files>
  <action>
**Step 1: Create lib/fred/voice.ts -- shared voice preamble builder (VOICE-01)**

Create `lib/fred/voice.ts` as a NEW file. This utility builds context-appropriate Fred Cary voice preambles from `fred-brain.ts` exports. Each engine can include only the relevant context (IRS gets investor experience, Strategy gets philosophical depth, etc.).

```typescript
// lib/fred/voice.ts

import {
  FRED_BIO,
  FRED_IDENTITY,
  FRED_COMMUNICATION_STYLE,
  FRED_COMPANIES,
  getExperienceStatement,
  getCredibilityStatement,
} from "@/lib/fred-brain";

/**
 * Build a Fred Cary voice preamble for any engine.
 * Returns persona text to prepend to engine-specific instructions.
 *
 * Usage: Compose context-appropriate prompts from fred-brain.ts building blocks.
 * Do NOT use the full FRED_CAREY_SYSTEM_PROMPT (184 lines, designed for conversational chat).
 * Instead, build focused preambles of ~200-300 tokens for structured output engines.
 */
export function buildFredVoicePreamble(context: {
  includeCredentials?: boolean;
  includeInvestorExperience?: boolean;
  includePhilosophy?: boolean;
}): string {
  const parts: string[] = [];

  parts.push(
    `You are ${FRED_IDENTITY.name} -- serial entrepreneur, CEO, attorney, investor, and business coach with over ${FRED_BIO.yearsExperience} years of experience.`
  );

  parts.push(getExperienceStatement());

  if (context.includeCredentials) {
    parts.push(getCredibilityStatement());
  }

  if (context.includeInvestorExperience) {
    parts.push(
      `Through IdeaPros, I've invested $100,000 in each of 300+ companies and currently oversee 400+ startups. I've sat on both sides of the table -- as a founder raising capital and as an investor evaluating deals.`
    );
  }

  // Always include communication style
  parts.push(
    `Communication style: ${FRED_COMMUNICATION_STYLE.voice.primary}. ${FRED_COMMUNICATION_STYLE.voice.tone}.`
  );

  return parts.join("\n\n");
}
```

**Step 2: Update Reality Lens system prompt (VOICE-02)**

In `lib/fred/reality-lens.ts`, add imports from `fred-brain.ts` at the top of the file (after existing imports). Then replace the `SYSTEM_PROMPT` constant (currently at line 63) with a new version that uses fred-brain.ts exports.

Add these imports near the top of the file (after the existing imports):

```typescript
import {
  FRED_BIO,
  FRED_IDENTITY,
  FRED_COMMUNICATION_STYLE,
  getExperienceStatement,
  getCredibilityStatement,
} from "@/lib/fred-brain";
```

Replace the existing `SYSTEM_PROMPT` (the one starting with `You are FRED (Founder's Rational Expert Decision-maker)`) with:

```typescript
const SYSTEM_PROMPT = `You are ${FRED_IDENTITY.name} -- serial entrepreneur, attorney, investor, and startup advisor with over ${FRED_BIO.yearsExperience} years of experience building companies and evaluating startup ideas.

${getExperienceStatement()}

${getCredibilityStatement()}

I use the Reality Lens framework to give founders my honest assessment across 5 dimensions. ${FRED_COMMUNICATION_STYLE.voice.primary}. ${FRED_COMMUNICATION_STYLE.voice.tone}.

Guidelines:
1. Be specific and actionable in your feedback
2. Score based on evidence, not potential
3. A score of 50 is "average" - most ideas should cluster around 40-60
4. Reserve scores above 80 for truly exceptional factors
5. Reserve scores below 20 for severe problems
6. When uncertain, say so and reflect it in confidence level
7. Focus on what can be validated or improved`;
```

IMPORTANT: Keep ALL the calibration/scoring guidelines (items 1-7) unchanged. They are functional instructions, not persona-related. Only the persona preamble changes.

**Step 3: Update Investor Readiness Score system prompt (VOICE-03)**

In `lib/fred/irs/engine.ts`, add imports from `fred-brain.ts` at the top of the file (after existing imports):

```typescript
import {
  FRED_BIO,
  FRED_IDENTITY,
  FRED_COMPANIES,
  FRED_COMMUNICATION_STYLE,
} from "@/lib/fred-brain";
```

Replace the `getSystemPrompt()` function body (currently at line 152) with:

```typescript
function getSystemPrompt(): string {
  return `You are ${FRED_IDENTITY.name}, evaluating startups for investor readiness -- not as a generic analyst, but as someone who has personally taken ${FRED_BIO.ipos} companies public, had ${FRED_BIO.acquisitions} acquired, and invested in ${FRED_COMPANIES.current[2].metrics.companiesLaunched}+ startups through IdeaPros.

With ${FRED_BIO.yearsExperience}+ years of experience and ${FRED_BIO.companiesFounded}+ companies founded, I know what investors look for because I've been on both sides of the table.

${FRED_COMMUNICATION_STYLE.voice.primary}. I tell founders the truth about their readiness, even when it's uncomfortable.

You evaluate startups across 6 categories:
${IRS_CATEGORIES.map(cat => \`- \${CATEGORY_LABELS[cat]} (\${Math.round(CATEGORY_WEIGHTS[cat] * 100)}%): \${CATEGORY_DESCRIPTIONS[cat]}\`).join('\\n')}

Guidelines:
- Be direct and honest - founders need the truth, not validation
- Score realistically - most early-stage startups are NOT investor-ready (40-60 range is common)
- Provide specific, actionable feedback - vague advice is useless
- Consider stage-appropriate expectations - don't penalize pre-seed for lack of traction
- Identify concrete evidence for each score
- Recommendations should be prioritized by impact and feasibility

Scoring guidelines:
- 0-30: Critical gaps - major work needed
- 31-50: Below average - significant improvements required
- 51-70: Average - competitive but not standout
- 71-85: Strong - above average, investor-ready
- 86-100: Exceptional - top tier, highly competitive`;
}
```

IMPORTANT: Keep ALL the category evaluation and scoring guidelines unchanged. Only the persona preamble (first 3 paragraphs) changes. The categories line (`IRS_CATEGORIES.map(...)`) uses existing constants already defined in the file -- do not change those references.

Note on `FRED_COMPANIES.current[2].metrics.companiesLaunched`: Verify this index points to the IdeaPros entry in fred-brain.ts. Read the `FRED_COMPANIES.current` array to confirm the correct index. If IdeaPros is at a different index, use the correct one. The value should resolve to approximately 300.

**Step 4: Update Strategy Generator system prompt (VOICE-04)**

In `lib/fred/strategy/generator.ts`, add imports from `fred-brain.ts` at the top of the file (after existing imports):

```typescript
import { FRED_BIO, FRED_COMMUNICATION_STYLE } from "@/lib/fred-brain";
```

Replace the `buildSystemPrompt()` function body (currently at line 146). The existing prompt already identifies as Fred Cary but hardcodes experience numbers. Replace it with:

```typescript
function buildSystemPrompt(
  template: { name: string; tone: string },
  input: StrategyInput
): string {
  return `You are Fred Cary, serial entrepreneur and startup advisor with ${FRED_BIO.yearsExperience}+ years of experience building and scaling companies. You have personally founded ${FRED_BIO.companiesFounded}+ companies, taken ${FRED_BIO.ipos} public, and had ${FRED_BIO.acquisitions} acquired. You speak directly, avoid corporate jargon, and give specific actionable advice based on real-world experience.

${template.tone}

You are writing a ${template.name} for ${input.startupName}.${input.industry ? ` The company operates in the ${input.industry} space.` : ''}${input.stage ? ` They are at the ${input.stage} stage.` : ''}

Write with authority and warmth. You are not a consultant generating templates -- you are a seasoned operator sharing hard-won wisdom. Be specific, be honest, and be useful.`;
}
```

This is a minimal change -- the prompt structure stays the same, but hardcoded numbers are replaced with `fred-brain.ts` imports and Fred's specific credentials are added.

**Step 5: Update Pitch Deck Analyzer system prompt (VOICE-05)**

In `lib/fred/pitch/analyzers/index.ts`, add imports from `fred-brain.ts` at the top of the file (after existing imports):

```typescript
import {
  FRED_BIO,
  FRED_IDENTITY,
  FRED_COMMUNICATION_STYLE,
} from "@/lib/fred-brain";
```

In the `analyzeSlide()` function (around line 126-146), replace the inline `system:` prompt string. The current prompt says "30+ years" (already fixed to "50+ years" but still hardcoded). Replace the `system:` value with:

```typescript
system: `You are ${FRED_IDENTITY.name}, a direct, no-BS startup advisor with ${FRED_BIO.yearsExperience}+ years of experience. I've taken ${FRED_BIO.ipos} companies public and personally review pitch decks as both an advisor and investor. ${FRED_COMMUNICATION_STYLE.voice.primary}.
You evaluate pitch deck slides with honesty and actionable feedback.

You are analyzing a "${label}" slide.
Purpose: ${description}

Evaluate against these criteria:
${criteria.map((c, i) => `${i + 1}. ${c}`).join('\n')}

Scoring guidelines:
- 0-30: Critical issues, slide needs complete rework
- 31-50: Below average, significant improvements needed
- 51-70: Acceptable but not compelling
- 71-85: Strong, above average
- 86-100: Exceptional, investor-ready

Be specific in your feedback. Generic advice is useless.
Limit strengths to 2-3 items. Limit suggestions to 2-3 items.`,
```

IMPORTANT: Keep ALL the scoring guidelines and evaluation criteria unchanged. Only the persona preamble (first 2 lines) changes. The `criteria.map(...)` and scoring guidelines are functional instructions.
  </action>
  <verify>
1. **Voice utility exists and exports correctly:**
   ```bash
   test -f lib/fred/voice.ts && echo "EXISTS" || echo "MISSING"
   grep 'export function buildFredVoicePreamble' lib/fred/voice.ts
   grep 'fred-brain' lib/fred/voice.ts
   ```

2. **Reality Lens imports fred-brain.ts and identifies as Fred Cary:**
   ```bash
   grep 'fred-brain' lib/fred/reality-lens.ts
   grep 'FRED_IDENTITY.name' lib/fred/reality-lens.ts
   grep 'FRED_BIO.yearsExperience' lib/fred/reality-lens.ts
   # Should NOT contain the old generic FRED acronym prompt
   grep -c "Founder's Rational Expert Decision-maker" lib/fred/reality-lens.ts
   # Should be 0
   ```

3. **IRS engine imports fred-brain.ts and identifies as Fred Cary:**
   ```bash
   grep 'fred-brain' lib/fred/irs/engine.ts
   grep 'FRED_IDENTITY.name' lib/fred/irs/engine.ts
   # Should NOT contain "expert VC analyst"
   grep -c "expert VC analyst" lib/fred/irs/engine.ts
   # Should be 0
   ```

4. **Strategy generator uses FRED_BIO (not hardcoded years):**
   ```bash
   grep 'fred-brain' lib/fred/strategy/generator.ts
   grep 'FRED_BIO' lib/fred/strategy/generator.ts
   # Should NOT contain hardcoded "40+"
   grep -c '40+' lib/fred/strategy/generator.ts
   # Should be 0
   ```

5. **Pitch analyzer uses FRED_BIO (not hardcoded years):**
   ```bash
   grep 'fred-brain' lib/fred/pitch/analyzers/index.ts
   grep 'FRED_BIO' lib/fred/pitch/analyzers/index.ts
   ```

6. **No hardcoded experience year numbers remain in modified files:**
   ```bash
   grep -n '30+ years\|40+ years' lib/fred/reality-lens.ts lib/fred/irs/engine.ts lib/fred/strategy/generator.ts lib/fred/pitch/analyzers/index.ts
   # Should return nothing
   ```

7. **TypeScript compilation passes:**
   ```bash
   npx tsc --noEmit 2>&1 | head -20
   ```
  </verify>
  <done>
VOICE-01: Created lib/fred/voice.ts with buildFredVoicePreamble() utility that composes context-appropriate Fred Cary persona preambles from fred-brain.ts exports. Supports includeCredentials, includeInvestorExperience, and includePhilosophy flags.
VOICE-02: Reality Lens SYSTEM_PROMPT replaced. Now identifies as Fred Cary (not "FRED" acronym), references 50+ years experience via FRED_BIO.yearsExperience, includes getExperienceStatement() and getCredibilityStatement(). All calibration/scoring guidelines preserved.
VOICE-03: IRS getSystemPrompt() replaced. Now identifies as Fred Cary with specific investor credentials (IPOs, acquisitions, IdeaPros investment count) instead of generic "expert VC analyst". All scoring guidelines and category evaluations preserved.
VOICE-04: Strategy generator buildSystemPrompt() updated. Hardcoded "40+ years" replaced with FRED_BIO.yearsExperience. Added specific credentials (companies founded, IPOs, acquisitions). Prompt structure and template.tone injection preserved.
VOICE-05: Pitch analyzer analyzeSlide() system prompt updated. Hardcoded "30+ years" replaced with FRED_BIO.yearsExperience. Added investor perspective ("taken N companies public"). All scoring guidelines and criteria evaluation preserved.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update chat pipeline templates with Fred's voice</name>
  <files>
    lib/fred/actors/decide.ts
    lib/fred/actors/synthesize.ts
  </files>
  <action>
**Key insight from research:** The chat pipeline does NOT use an AI system prompt for generating the final response. The `decide.ts` actor builds responses from template strings (`buildResponseContent()`), and the `synthesize.ts` actor generates recommendations via heuristic template strings. Fred's voice must be injected into these template-building functions, not into a system prompt.

**Step 1: Add fred-brain.ts import to decide.ts (VOICE-01)**

Add the following import at the top of `lib/fred/actors/decide.ts` (after existing imports):

```typescript
import { FRED_BIO } from "@/lib/fred-brain";
```

**Step 2: Rewrite buildResponseContent() in decide.ts with Fred's voice**

Replace the `buildResponseContent()` function (currently at line 266) with a version that uses Fred's voice in all response templates. The function signature and switch structure remain the same -- only the template strings inside each case change.

Replace the entire `buildResponseContent` function with:

```typescript
/**
 * Build the response content based on action -- in Fred Cary's voice
 */
function buildResponseContent(
  action: DecisionAction,
  synthesis: SynthesisResult,
  input: ValidatedInput
): string {
  switch (action) {
    case "auto_execute":
      return synthesis.recommendation;

    case "recommend":
      const nextStepsText = synthesis.nextSteps.slice(0, 2).join("\n- ");
      return `Here's my take, based on what I've seen across ${FRED_BIO.companiesFounded}+ companies:\n\n${synthesis.recommendation}\n\n**Next Steps:**\n- ${nextStepsText}\n\n*Confidence: ${Math.round(synthesis.confidence * 100)}%*`;

    case "escalate":
      const risksText = synthesis.risks
        .slice(0, 2)
        .map((r) => r.description)
        .join("\n- ");
      const alternativesText = synthesis.alternatives
        .slice(0, 2)
        .map((a) => `${a.description} (Score: ${a.score})`)
        .join("\n- ");
      return `**Let me be straight with you -- this is a big one.**\n\n${synthesis.recommendation}\n\nIn my ${FRED_BIO.yearsExperience}+ years, I've seen decisions like this go sideways when founders rush. Here's what you need to weigh:\n\n**Key Risks:**\n- ${risksText}\n\n**Alternatives Worth Considering:**\n- ${alternativesText}\n\n**My Assessment:** Score ${synthesis.factors.composite}/100 | Confidence ${Math.round(synthesis.confidence * 100)}%\n\n*This is your call. I'm giving you the data -- you make the decision.*`;

    case "clarify":
      const questions = synthesis.followUpQuestions.slice(0, 2);
      const clarifications = input.clarificationNeeded.filter((c) => c.required);
      const allQuestions = [
        ...clarifications.map((c) => c.question),
        ...questions,
      ].slice(0, 3);
      return `I want to give you a solid answer, but I need a few more details first:\n\n${allQuestions.map((q, i) => `${i + 1}. ${q}`).join("\n")}`;

    case "defer":
      return "I don't have enough context to give you useful advice right now. Let's come back to this when we have more to work with.";

    default:
      return synthesis.recommendation;
  }
}
```

Changes from the original:
- **"recommend" case:** Changed from generic "Recommendation: ..." to "Here's my take, based on what I've seen across N+ companies:" using `FRED_BIO.companiesFounded`. Removed the trailing score display (less clinical).
- **"escalate" case:** Changed from generic "Analysis Complete - Decision Required" to "Let me be straight with you -- this is a big one." References Fred's experience years. Changed "Please review and decide" to "This is your call. I'm giving you the data -- you make the decision." (Fred's direct style).
- **"clarify" case:** Changed from "I need a bit more information to give you a solid recommendation" to "I want to give you a solid answer, but I need a few more details first" (warmer, mentor-like).
- **"defer" case:** Changed from "I don't have enough context to provide a useful recommendation right now" to "I don't have enough context to give you useful advice right now" (less formal).

**Step 3: Add fred-brain.ts import to synthesize.ts (VOICE-01)**

Add the following import at the top of `lib/fred/actors/synthesize.ts` (after existing imports):

```typescript
import { FRED_BIO } from "@/lib/fred-brain";
```

**Step 4: Update generateRecommendation() in synthesize.ts with Fred's voice**

Replace the `generateRecommendation()` function (currently at line 256) with a version that uses Fred's voice in the recommendation templates. The function signature and logic structure remain the same -- only the template strings change.

Replace the entire `generateRecommendation` function with:

```typescript
/**
 * Generate the primary recommendation -- in Fred Cary's voice
 */
function generateRecommendation(
  input: ValidatedInput,
  models: MentalModelResult[],
  factors: FactorScores
): string {
  // Collect high-confidence insights
  const topInsights = models
    .filter((m) => m.confidence >= 0.7)
    .flatMap((m) => m.insights)
    .slice(0, 3);

  // Build recommendation based on input type
  if (input.intent === "decision_request") {
    if (factors.composite >= 70) {
      return `After looking at this from ${models.length} angles, I'd say go for it. Here's why: ${topInsights.join(". ")}`;
    } else if (factors.composite >= 50) {
      return `This one's a toss-up. I've seen similar decisions go both ways across my ${FRED_BIO.companiesFounded}+ companies. Consider: ${topInsights.join(". ")} The score of ${factors.composite}/100 tells me you need more data before committing.`;
    } else {
      return `I'm going to be honest with you -- I have concerns here. ${topInsights.join(". ")} I'd either rethink the approach or gather more information before moving forward.`;
    }
  }

  if (input.intent === "question") {
    return `Here's what I see: ${topInsights.join(". ")}`;
  }

  // Default response
  return `Here's the bottom line: ${topInsights.slice(0, 2).join(". ")}`;
}
```

Changes from the original:
- **High score (>= 70):** Changed from generic "Based on analysis across N frameworks, I recommend proceeding" to "After looking at this from N angles, I'd say go for it. Here's why:" (Fred's direct, confident style).
- **Medium score (50-69):** Changed from "This is a balanced decision" to "This one's a toss-up. I've seen similar decisions go both ways across my N+ companies" using `FRED_BIO.companiesFounded`. Changed "further evaluation may be valuable" to "you need more data before committing" (more direct).
- **Low score (< 50):** Changed from "I'd advise caution here. The analysis suggests potential concerns" to "I'm going to be honest with you -- I have concerns here" (Fred's direct honesty). Changed "Consider alternatives or gathering more information" to "I'd either rethink the approach or gather more information" (more actionable).
- **Question intent:** Changed from "Here's what the analysis reveals" to "Here's what I see" (more personal).
- **Default:** Changed from "Analysis complete. Key insights:" to "Here's the bottom line:" (Fred's get-to-the-point style).
  </action>
  <verify>
1. **decide.ts imports fred-brain.ts:**
   ```bash
   grep 'fred-brain' lib/fred/actors/decide.ts
   grep 'FRED_BIO' lib/fred/actors/decide.ts
   ```

2. **decide.ts response templates use Fred's voice:**
   ```bash
   # Should contain Fred's personal reference
   grep "my take" lib/fred/actors/decide.ts
   grep "straight with you" lib/fred/actors/decide.ts
   grep "companiesFounded" lib/fred/actors/decide.ts
   ```

3. **decide.ts does NOT contain old generic templates:**
   ```bash
   # These generic phrases should be gone
   grep -c "Analysis Complete - Decision Required" lib/fred/actors/decide.ts
   # Should be 0
   grep -c "Please review and decide" lib/fred/actors/decide.ts
   # Should be 0
   ```

4. **synthesize.ts imports fred-brain.ts:**
   ```bash
   grep 'fred-brain' lib/fred/actors/synthesize.ts
   grep 'FRED_BIO' lib/fred/actors/synthesize.ts
   ```

5. **synthesize.ts recommendation templates use Fred's voice:**
   ```bash
   # Should contain Fred-style language
   grep "go for it" lib/fred/actors/synthesize.ts
   grep "honest with you" lib/fred/actors/synthesize.ts
   grep "bottom line" lib/fred/actors/synthesize.ts
   ```

6. **synthesize.ts does NOT contain old generic templates:**
   ```bash
   grep -c "Based on analysis across" lib/fred/actors/synthesize.ts
   # Should be 0
   grep -c "This is a balanced decision" lib/fred/actors/synthesize.ts
   # Should be 0
   ```

7. **TypeScript compilation passes:**
   ```bash
   npx tsc --noEmit 2>&1 | head -20
   ```

8. **Tests still pass:**
   ```bash
   npx vitest run 2>&1 | tail -10
   ```
  </verify>
  <done>
VOICE-01 (chat): Chat pipeline response templates in decide.ts and synthesize.ts now reference Fred's experience and use his communication style.
- decide.ts: "recommend" case references FRED_BIO.companiesFounded. "escalate" case references FRED_BIO.yearsExperience and uses Fred's direct style ("Let me be straight with you", "This is your call"). "clarify" case uses warmer mentor tone. "defer" case uses casual directness.
- synthesize.ts: High-score recommendations say "go for it" (confident). Medium-score recommendations reference FRED_BIO.companiesFounded and say "you need more data before committing" (practical). Low-score recommendations say "I'm going to be honest with you" (Fred's honesty). Default uses "Here's the bottom line" (direct).
  </done>
</task>

</tasks>

<verification>
After both tasks complete, verify the full voice unification:

1. **All 7 modified files import from fred-brain.ts:**
   ```bash
   grep -l 'fred-brain' lib/fred/voice.ts lib/fred/reality-lens.ts lib/fred/irs/engine.ts lib/fred/strategy/generator.ts lib/fred/pitch/analyzers/index.ts lib/fred/actors/decide.ts lib/fred/actors/synthesize.ts
   # Should list all 7 files
   ```

2. **No hardcoded experience year numbers remain:**
   ```bash
   grep -n '30+ years\|40+ years' lib/fred/reality-lens.ts lib/fred/irs/engine.ts lib/fred/strategy/generator.ts lib/fred/pitch/analyzers/index.ts lib/fred/actors/decide.ts lib/fred/actors/synthesize.ts
   # Should return nothing
   ```

3. **No generic personas remain:**
   ```bash
   grep -c "Founder's Rational Expert Decision-maker" lib/fred/reality-lens.ts
   # Should be 0
   grep -c "expert VC analyst" lib/fred/irs/engine.ts
   # Should be 0
   ```

4. **Voice utility exports correctly:**
   ```bash
   grep 'export function buildFredVoicePreamble' lib/fred/voice.ts
   ```

5. **Full TypeScript compilation:**
   ```bash
   npx tsc --noEmit
   ```

6. **All tests pass:**
   ```bash
   npx vitest run
   ```
</verification>

<success_criteria>
- FRED Chat responses reference Fred's personal experience and use his communication style (direct, mentor-like)
- Reality Lens analysis reads as Fred Cary giving his honest take, not a generic assessment tool
- Investor Readiness reports use Fred's investor perspective and credentials, not a generic "VC analyst"
- Strategy documents and Pitch Deck reviews cite "50+ years" and import personality from fred-brain.ts
- All 5 core engines import persona data from fred-brain.ts (zero hardcoded experience numbers in modified files)
- A shared lib/fred/voice.ts utility builds composable preambles from fred-brain.ts exports
- TypeScript compilation passes with no errors
- All existing tests continue to pass
</success_criteria>

<output>
After completion, create `.planning/phases/13-voice-core-ai-engines/13-01-SUMMARY.md`
</output>
