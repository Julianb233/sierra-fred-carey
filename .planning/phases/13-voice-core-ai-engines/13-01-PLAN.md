---
phase: 13-voice-core-ai-engines
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - lib/fred/voice.ts
  - lib/fred/reality-lens.ts
  - lib/fred/irs/engine.ts
  - lib/fred/strategy/generator.ts
  - lib/fred/pitch/analyzers/index.ts
  - lib/fred/actors/decide.ts
  - lib/fred/actors/synthesize.ts
autonomous: true

must_haves:
  truths:
    - "FRED Chat responses reference Fred's personal experience and use his direct, mentor-like communication style"
    - "Reality Lens reads as Fred Cary giving his honest take, identifying himself by name with 50+ years of experience"
    - "Investor Readiness reports use Fred's investor perspective (3 IPOs, 300+ companies coached), not a generic VC analyst"
    - "Strategy documents cite correct '50+ years' via FRED_BIO.yearsExperience from fred-brain.ts, not hardcoded numbers"
    - "Pitch Deck reviews cite correct '50+ years' via FRED_BIO.yearsExperience from fred-brain.ts, not hardcoded numbers"
    - "All five engines import from fred-brain.ts (directly or via voice.ts) rather than hardcoding persona data"
    - "No hardcoded experience year numbers remain in any of the 7 modified files"
    - "A shared voice utility (lib/fred/voice.ts) builds composable Fred preambles from fred-brain.ts exports"
  artifacts:
    - path: "lib/fred/voice.ts"
      provides: "Shared Fred Cary voice preamble builder"
      exports: ["buildFredVoicePreamble"]
    - path: "lib/fred/reality-lens.ts"
      provides: "Reality Lens engine with Fred Cary persona (not generic FRED acronym)"
      contains: "buildFredVoicePreamble"
    - path: "lib/fred/irs/engine.ts"
      provides: "IRS engine with Fred Cary investor credentials (not generic VC analyst)"
      contains: "buildFredVoicePreamble"
    - path: "lib/fred/strategy/generator.ts"
      provides: "Strategy generator with correct experience years from fred-brain.ts"
      contains: "FRED_BIO"
    - path: "lib/fred/pitch/analyzers/index.ts"
      provides: "Pitch analyzer with correct experience years from fred-brain.ts"
      contains: "FRED_BIO"
    - path: "lib/fred/actors/decide.ts"
      provides: "Decision actor with Fred Cary voice in response templates"
      contains: "FRED_BIO"
    - path: "lib/fred/actors/synthesize.ts"
      provides: "Synthesis actor with Fred Cary voice in recommendations"
      contains: "FRED_BIO"
  key_links:
    - from: "lib/fred/voice.ts"
      to: "lib/fred-brain.ts"
      via: "imports FRED_IDENTITY, FRED_BIO, FRED_COMMUNICATION_STYLE, FRED_COMPANIES, getExperienceStatement, getCredibilityStatement"
      pattern: "from ['\"]@/lib/fred-brain['\"]"
    - from: "lib/fred/reality-lens.ts"
      to: "lib/fred/voice.ts"
      via: "imports buildFredVoicePreamble for SYSTEM_PROMPT construction"
      pattern: "buildFredVoicePreamble"
    - from: "lib/fred/irs/engine.ts"
      to: "lib/fred/voice.ts"
      via: "imports buildFredVoicePreamble for getSystemPrompt() construction"
      pattern: "buildFredVoicePreamble"
    - from: "lib/fred/strategy/generator.ts"
      to: "lib/fred-brain.ts"
      via: "imports FRED_BIO for buildSystemPrompt()"
      pattern: "FRED_BIO"
    - from: "lib/fred/pitch/analyzers/index.ts"
      to: "lib/fred-brain.ts"
      via: "imports FRED_BIO, FRED_IDENTITY, FRED_COMMUNICATION_STYLE for analyzeSlide()"
      pattern: "FRED_BIO"
    - from: "lib/fred/actors/decide.ts"
      to: "lib/fred-brain.ts"
      via: "imports FRED_BIO for template string experience references"
      pattern: "FRED_BIO"
    - from: "lib/fred/actors/synthesize.ts"
      to: "lib/fred-brain.ts"
      via: "imports FRED_BIO for recommendation template experience references"
      pattern: "FRED_BIO"
---

<objective>
Unify Fred Cary's voice across all five core AI engines so every AI interaction sounds unmistakably like Fred Cary -- the real person with 50+ years, 40+ companies, and 3 IPOs -- not a generic AI advisor.

Purpose: The five core AI features (Chat, Reality Lens, Investor Readiness, Strategy Docs, Pitch Deck) currently use either a generic "FRED" acronym, a generic "VC analyst", or hardcoded wrong experience numbers. This plan replaces all inline persona text with imports from the authoritative `fred-brain.ts` knowledge base, ensuring a single source of truth and authentic Fred Cary voice.

Output: 7 modified files + 1 new file (`lib/fred/voice.ts`), all importing from `fred-brain.ts`. No new dependencies. No schema changes. No functional changes to scoring logic.
</objective>

<execution_context>
@/opt/agency-workspace/sierra-fred-carey/.planning/workflows/execute-plan.md
@/opt/agency-workspace/sierra-fred-carey/.planning/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/13-voice-core-ai-engines/13-RESEARCH.md

Key source files (READ ALL BEFORE MODIFYING):
@lib/fred-brain.ts (410 lines -- the authoritative knowledge base with all exports)
@lib/fred/reality-lens.ts (SYSTEM_PROMPT at line 63, used by assessFactor at line 167 and synthesizeAssessment at line 302)
@lib/fred/irs/engine.ts (getSystemPrompt() at line 152, used by calculateIRS at line 84)
@lib/fred/strategy/generator.ts (buildSystemPrompt() at line 146, says "50+" but does NOT import fred-brain.ts)
@lib/fred/pitch/analyzers/index.ts (inline system prompt at line 129, says "50+" but no fred-brain import)
@lib/fred/actors/decide.ts (buildResponseContent() at line 266, template strings with no Fred personality)
@lib/fred/actors/synthesize.ts (generateRecommendation() at line 256, template strings with no Fred personality)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create shared voice utility and update 4 AI engine system prompts (Reality Lens, IRS, Strategy, Pitch)</name>
  <files>
    lib/fred/voice.ts
    lib/fred/reality-lens.ts
    lib/fred/irs/engine.ts
    lib/fred/strategy/generator.ts
    lib/fred/pitch/analyzers/index.ts
  </files>
  <action>
**Step 1: Create `lib/fred/voice.ts` -- shared voice preamble builder (VOICE-01)**

Create a NEW file `lib/fred/voice.ts`. This utility builds context-appropriate Fred Cary voice preambles from `fred-brain.ts` exports. Each engine includes only relevant context (IRS gets investor experience, Strategy gets philosophical depth, etc.). This also serves Phases 14 and 15 which will need the same utility for agent tools.

```typescript
import {
  FRED_BIO,
  FRED_IDENTITY,
  FRED_COMMUNICATION_STYLE,
  FRED_COMPANIES,
  getExperienceStatement,
  getCredibilityStatement,
} from "@/lib/fred-brain";

/**
 * Build a Fred Cary voice preamble for any engine.
 * Returns persona text to prepend to engine-specific instructions.
 *
 * Keep preambles concise (~200-300 tokens) for structured output engines
 * to avoid token bloat. The full FRED_CAREY_SYSTEM_PROMPT (184 lines)
 * is designed for conversational chat and should NOT be used in scoring engines.
 */
export function buildFredVoicePreamble(context: {
  includeCredentials?: boolean;
  includeInvestorExperience?: boolean;
  includePhilosophy?: boolean;
}): string {
  const parts: string[] = [];

  parts.push(
    `You are ${FRED_IDENTITY.name} -- serial entrepreneur, CEO, attorney, investor, and business coach with over ${FRED_BIO.yearsExperience} years of experience.`
  );

  parts.push(getExperienceStatement());

  if (context.includeCredentials) {
    parts.push(getCredibilityStatement());
  }

  if (context.includeInvestorExperience) {
    parts.push(
      `Through IdeaPros, I've invested $100,000 in each of ${FRED_COMPANIES.current[2].metrics.companiesLaunched}+ companies and currently oversee ${FRED_COMPANIES.current[2].metrics.startupsInDevelopment}+ startups. I've sat on both sides of the table -- as a founder raising capital and as an investor evaluating deals.`
    );
  }

  // Always include communication style
  parts.push(
    `Communication style: ${FRED_COMMUNICATION_STYLE.voice.primary}. ${FRED_COMMUNICATION_STYLE.voice.tone}.`
  );

  return parts.join("\n\n");
}
```

IMPORTANT: Before writing, verify that `FRED_COMPANIES.current[2]` is the IdeaPros entry in fred-brain.ts. Read the `FRED_COMPANIES.current` array: index 0 is Sahara, index 1 is Private Services Fund, index 2 is IdeaPros. Confirm `metrics.companiesLaunched` (300) and `metrics.startupsInDevelopment` (400) exist on that entry.

**Step 2: Update `lib/fred/reality-lens.ts` (VOICE-02)**

Replace the generic "FRED" acronym persona with Fred Cary's real identity.

1. Add import at top (after existing imports):
   ```typescript
   import { buildFredVoicePreamble } from "@/lib/fred/voice";
   ```

2. Replace the `SYSTEM_PROMPT` constant (line 63-74). The new version uses `buildFredVoicePreamble` for the persona, then appends Reality Lens-specific context and the UNCHANGED calibration guidelines:

   ```typescript
   const SYSTEM_PROMPT = `${buildFredVoicePreamble({ includeCredentials: true })}

I use the Reality Lens framework to give founders my honest assessment across 5 dimensions.

Your role is to provide brutally honest, well-calibrated assessments of startup ideas. You are not trying to be encouraging or discouraging - you are trying to be accurate.

Guidelines:
1. Be specific and actionable in your feedback
2. Score based on evidence, not potential
3. A score of 50 is "average" - most ideas should cluster around 40-60
4. Reserve scores above 80 for truly exceptional factors
5. Reserve scores below 20 for severe problems
6. When uncertain, say so and reflect it in confidence level
7. Focus on what can be validated or improved`;
   ```

   CRITICAL: Keep ALL 7 calibration guidelines EXACTLY as they are. They are functional scoring instructions, not persona text. The `assessFactor()` (line 167) and `synthesizeAssessment()` (line 302) both reference this `SYSTEM_PROMPT` variable and will automatically use the updated version.

**Step 3: Update `lib/fred/irs/engine.ts` (VOICE-03)**

Replace the generic "expert VC analyst" persona with Fred Cary's investor credentials.

1. Add import at top (after existing imports):
   ```typescript
   import { buildFredVoicePreamble } from "@/lib/fred/voice";
   ```

2. Replace the `getSystemPrompt()` function body (line 152-173). The new version uses `buildFredVoicePreamble` with investor experience, then appends the UNCHANGED category and scoring guidelines:

   ```typescript
   function getSystemPrompt(): string {
     return `${buildFredVoicePreamble({ includeCredentials: true, includeInvestorExperience: true })}

I evaluate startups for investor readiness -- not as a generic analyst, but as someone who has personally been through this. I know what investors look for because I've been on both sides of the table.

You evaluate startups across 6 categories:
${IRS_CATEGORIES.map(cat => `- ${CATEGORY_LABELS[cat]} (${Math.round(CATEGORY_WEIGHTS[cat] * 100)}%): ${CATEGORY_DESCRIPTIONS[cat]}`).join('\n')}

Guidelines:
- Be direct and honest - founders need the truth, not validation
- Score realistically - most early-stage startups are NOT investor-ready (40-60 range is common)
- Provide specific, actionable feedback - vague advice is useless
- Consider stage-appropriate expectations - don't penalize pre-seed for lack of traction
- Identify concrete evidence for each score
- Recommendations should be prioritized by impact and feasibility

Scoring guidelines:
- 0-30: Critical gaps - major work needed
- 31-50: Below average - significant improvements required
- 51-70: Average - competitive but not standout
- 71-85: Strong - above average, investor-ready
- 86-100: Exceptional - top tier, highly competitive`;
   }
   ```

   CRITICAL: The category listing (`IRS_CATEGORIES.map(...)`) and ALL scoring/evaluation guidelines must remain EXACTLY as-is. Only the persona preamble (first paragraph) changes. The `IRS_CATEGORIES`, `CATEGORY_LABELS`, `CATEGORY_WEIGHTS`, `CATEGORY_DESCRIPTIONS` constants are already imported in the file -- do not duplicate them.

**Step 4: Update `lib/fred/strategy/generator.ts` (VOICE-04)**

The existing prompt already identifies as Fred Cary and says "50+ years" (line 150) -- but it hardcodes the number instead of importing from fred-brain.ts. This means future changes to Fred's bio won't propagate. Fix by importing.

1. Add import at top (after existing imports):
   ```typescript
   import { FRED_BIO } from "@/lib/fred-brain";
   ```

2. Update `buildSystemPrompt()` (line 146-157). Replace the first paragraph only -- keep template.tone, template.name, and the "Write with authority" paragraph unchanged:

   ```typescript
   function buildSystemPrompt(
     template: { name: string; tone: string },
     input: StrategyInput
   ): string {
     return `You are Fred Cary, serial entrepreneur and startup advisor with ${FRED_BIO.yearsExperience}+ years of experience building and scaling companies. You have personally founded ${FRED_BIO.companiesFounded}+ companies, taken ${FRED_BIO.ipos} public, and had ${FRED_BIO.acquisitions} acquired. You speak directly, avoid corporate jargon, and give specific actionable advice based on real-world experience.

${template.tone}

You are writing a ${template.name} for ${input.startupName}.${input.industry ? ` The company operates in the ${input.industry} space.` : ''}${input.stage ? ` They are at the ${input.stage} stage.` : ''}

Write with authority and warmth. You are not a consultant generating templates -- you are a seasoned operator sharing hard-won wisdom. Be specific, be honest, and be useful.`;
   }
   ```

   This is a minimal change. The prompt structure stays identical, but hardcoded numbers are replaced with `FRED_BIO` references and specific credentials (IPOs, acquisitions) are added.

**Step 5: Update `lib/fred/pitch/analyzers/index.ts` (VOICE-05)**

The existing prompt says "50+ years" (line 129) but hardcodes it without importing fred-brain.ts. Fix by importing and enriching with investor perspective.

1. Add import at top (after existing imports):
   ```typescript
   import {
     FRED_BIO,
     FRED_IDENTITY,
     FRED_COMMUNICATION_STYLE,
   } from "@/lib/fred-brain";
   ```

2. In the `analyzeSlide()` function (line 126-146), replace ONLY the `system:` prompt string. Keep the `model:`, `schema:`, `prompt:`, and `temperature:` fields unchanged:

   ```typescript
   system: `You are ${FRED_IDENTITY.name}, a ${FRED_COMMUNICATION_STYLE.voice.primary.toLowerCase()} startup advisor and investor with ${FRED_BIO.yearsExperience}+ years of experience. I've taken ${FRED_BIO.ipos} companies public and personally review pitch decks as both an advisor and investor.
You evaluate pitch deck slides with honesty and actionable feedback.

You are analyzing a "${label}" slide.
Purpose: ${description}

Evaluate against these criteria:
${criteria.map((c, i) => `${i + 1}. ${c}`).join('\n')}

Scoring guidelines:
- 0-30: Critical issues, slide needs complete rework
- 31-50: Below average, significant improvements needed
- 51-70: Acceptable but not compelling
- 71-85: Strong, above average
- 86-100: Exceptional, investor-ready

Be specific in your feedback. Generic advice is useless.
Limit strengths to 2-3 items. Limit suggestions to 2-3 items.`,
   ```

   CRITICAL: Keep ALL scoring guidelines and criteria evaluation text unchanged. Only the first 2 lines (persona identification) change. The `criteria.map(...)` construction, scoring ranges, and limit instructions are functional.

**RULES FOR ALL STEPS:**
- NEVER delete or modify scoring guidelines, calibration text, or Zod schema constraints
- Persona preambles go BEFORE functional instructions, never replacing them
- Keep preambles concise for structured output engines (Reality Lens, IRS, Pitch) to prevent token bloat or scoring degradation
- Strategy generator can have slightly more persona text since it uses `generateText()` (free-form prose, no schema)
- Verify TypeScript compiles after each file modification: `npx tsc --noEmit`
  </action>
  <verify>
1. `test -f lib/fred/voice.ts && grep 'export function buildFredVoicePreamble' lib/fred/voice.ts` -- voice utility exists and exports correctly
2. `grep 'buildFredVoicePreamble' lib/fred/reality-lens.ts lib/fred/irs/engine.ts` -- both structured-output engines use the shared builder
3. `grep 'FRED_BIO' lib/fred/strategy/generator.ts lib/fred/pitch/analyzers/index.ts` -- both use fred-brain.ts imports
4. `grep -c "Founder's Rational Expert Decision-maker" lib/fred/reality-lens.ts` -- returns 0 (generic FRED acronym eliminated)
5. `grep -c "expert VC analyst" lib/fred/irs/engine.ts` -- returns 0 (generic IRS persona eliminated)
6. `grep -rn "40\+ years\|30\+ years" lib/fred/strategy/generator.ts lib/fred/pitch/analyzers/index.ts` -- returns nothing (no wrong experience numbers)
7. `npx tsc --noEmit` passes with no errors
  </verify>
  <done>
VOICE-01: Created lib/fred/voice.ts with buildFredVoicePreamble() that composes persona preambles from fred-brain.ts exports. Supports includeCredentials, includeInvestorExperience, includePhilosophy flags.
VOICE-02: Reality Lens SYSTEM_PROMPT identifies as Fred Cary with credentials via buildFredVoicePreamble, not "FRED (Founder's Rational Expert Decision-maker)". All calibration guidelines preserved.
VOICE-03: IRS getSystemPrompt() identifies as Fred Cary with investor experience via buildFredVoicePreamble, not "expert VC analyst". All scoring guidelines preserved.
VOICE-04: Strategy buildSystemPrompt() uses FRED_BIO.yearsExperience (not hardcoded). Added specific credentials (IPOs, acquisitions).
VOICE-05: Pitch analyzeSlide() uses FRED_BIO.yearsExperience and FRED_IDENTITY.name (not hardcoded). Added investor perspective.
  </done>
</task>

<task type="auto">
  <name>Task 2: Inject Fred's voice into Chat pipeline template strings (decide.ts and synthesize.ts)</name>
  <files>
    lib/fred/actors/decide.ts
    lib/fred/actors/synthesize.ts
  </files>
  <action>
**Key insight from research:** The chat pipeline does NOT use an AI system prompt for generating the final response. The `decide.ts` actor builds responses from template strings (`buildResponseContent()`), and the `synthesize.ts` actor generates recommendations via heuristic template strings (`generateRecommendation()`). Fred's voice must be injected into these template-building functions, NOT into a system prompt.

**Step 1: Add fred-brain.ts import to decide.ts**

Add this import at the top of `lib/fred/actors/decide.ts` (after existing imports):

```typescript
import { FRED_BIO } from "@/lib/fred-brain";
```

**Step 2: Rewrite `buildResponseContent()` in decide.ts with Fred's voice**

Replace the `buildResponseContent()` function (line 266-305). The function signature and switch structure remain IDENTICAL -- only the template strings inside each case change.

```typescript
/**
 * Build the response content based on action -- in Fred Cary's voice
 */
function buildResponseContent(
  action: DecisionAction,
  synthesis: SynthesisResult,
  input: ValidatedInput
): string {
  switch (action) {
    case "auto_execute":
      return synthesis.recommendation;

    case "recommend":
      const nextStepsText = synthesis.nextSteps.slice(0, 2).join("\n- ");
      return `Here's my take, based on what I've seen across ${FRED_BIO.companiesFounded}+ companies:\n\n${synthesis.recommendation}\n\n**Next Steps:**\n- ${nextStepsText}\n\n*Confidence: ${Math.round(synthesis.confidence * 100)}%*`;

    case "escalate":
      const risksText = synthesis.risks
        .slice(0, 2)
        .map((r) => r.description)
        .join("\n- ");
      const alternativesText = synthesis.alternatives
        .slice(0, 2)
        .map((a) => `${a.description} (Score: ${a.score})`)
        .join("\n- ");
      return `**Let me be straight with you -- this is a big one.**\n\n${synthesis.recommendation}\n\nIn my ${FRED_BIO.yearsExperience}+ years, I've seen decisions like this go sideways when founders rush. Here's what you need to weigh:\n\n**Key Risks:**\n- ${risksText}\n\n**Alternatives Worth Considering:**\n- ${alternativesText}\n\n**My Assessment:** Score ${synthesis.factors.composite}/100 | Confidence ${Math.round(synthesis.confidence * 100)}%\n\n*This is your call. I'm giving you the data -- you make the decision.*`;

    case "clarify":
      const questions = synthesis.followUpQuestions.slice(0, 2);
      const clarifications = input.clarificationNeeded.filter((c) => c.required);
      const allQuestions = [
        ...clarifications.map((c) => c.question),
        ...questions,
      ].slice(0, 3);
      return `I want to give you a solid answer, but I need a few more details first:\n\n${allQuestions.map((q, i) => `${i + 1}. ${q}`).join("\n")}`;

    case "defer":
      return "I don't have enough context to give you useful advice right now. Let's come back to this when we have more to work with.";

    default:
      return synthesis.recommendation;
  }
}
```

What changed from original (and WHY):
- **"recommend"**: "Recommendation:" -> "Here's my take, based on what I've seen across N+ companies:" (Fred references his experience, uses first person). Uses `FRED_BIO.companiesFounded`.
- **"escalate"**: "Analysis Complete - Decision Required" -> "Let me be straight with you -- this is a big one." (Fred's direct style). "Please review and decide" -> "This is your call. I'm giving you the data -- you make the decision." References `FRED_BIO.yearsExperience`.
- **"clarify"**: "I need a bit more information to give you a solid recommendation" -> "I want to give you a solid answer, but I need a few more details first" (warmer, mentor-like).
- **"defer"**: Minor rewording for natural speech.
- **"auto_execute"**: UNCHANGED -- returns synthesis.recommendation directly (that text gets personality in synthesize.ts).

Leave ALL other functions in decide.ts UNCHANGED: `decideActor()`, `determineAction()`, `checkHighStakes()`, `checkReversibility()`, `parseMoneyValue()`, `checkRequiresHumanApproval()`, `buildDecisionReasoning()`, `determineProcedureUsed()`. These are internal logic, not user-facing text.

**Step 3: Add fred-brain.ts import to synthesize.ts**

Add this import at the top of `lib/fred/actors/synthesize.ts` (after existing imports):

```typescript
import { FRED_BIO } from "@/lib/fred-brain";
```

**Step 4: Rewrite `generateRecommendation()` in synthesize.ts with Fred's voice**

Replace the `generateRecommendation()` function (line 256-284). Function signature and logic structure remain IDENTICAL -- only template strings change.

```typescript
/**
 * Generate the primary recommendation -- in Fred Cary's voice
 */
function generateRecommendation(
  input: ValidatedInput,
  models: MentalModelResult[],
  factors: FactorScores
): string {
  // Collect high-confidence insights
  const topInsights = models
    .filter((m) => m.confidence >= 0.7)
    .flatMap((m) => m.insights)
    .slice(0, 3);

  // Build recommendation based on input type
  if (input.intent === "decision_request") {
    if (factors.composite >= 70) {
      return `After looking at this from ${models.length} angles, I'd say go for it. Here's why: ${topInsights.join(". ")}`;
    } else if (factors.composite >= 50) {
      return `This one's a toss-up. I've seen similar decisions go both ways across my ${FRED_BIO.companiesFounded}+ companies. Consider: ${topInsights.join(". ")} The score of ${factors.composite}/100 tells me you need more data before committing.`;
    } else {
      return `I'm going to be honest with you -- I have concerns here. ${topInsights.join(". ")} I'd either rethink the approach or gather more information before moving forward.`;
    }
  }

  if (input.intent === "question") {
    return `Here's what I see: ${topInsights.join(". ")}`;
  }

  // Default response
  return `Here's the bottom line: ${topInsights.slice(0, 2).join(". ")}`;
}
```

What changed from original (and WHY):
- **High score (>=70)**: "Based on analysis across N frameworks, I recommend proceeding with this opportunity" -> "After looking at this from N angles, I'd say go for it." (Fred is direct, confident, uses plain language).
- **Medium score (50-69)**: "This is a balanced decision" -> "This one's a toss-up. I've seen similar decisions go both ways across my N+ companies." Uses `FRED_BIO.companiesFounded`. "further evaluation may be valuable" -> "you need more data before committing" (more direct).
- **Low score (<50)**: "I'd advise caution here. The analysis suggests potential concerns" -> "I'm going to be honest with you -- I have concerns here." (Fred's signature honesty). "Consider alternatives or gathering more information" -> "I'd either rethink the approach or gather more information" (more actionable).
- **Question**: "Here's what the analysis reveals" -> "Here's what I see" (first person, personal).
- **Default**: "Analysis complete. Key insights:" -> "Here's the bottom line:" (Fred gets to the point).

Leave ALL other functions in synthesize.ts UNCHANGED: `synthesizeActor()`, `calculateFactorScores()`, `getAIFactorScores()`, `convertToFactorScores()`, `calculateHeuristicFactorScores()`, `generateAlternatives()`, `identifyRisks()`, `buildReasoning()`, `calculateConfidence()`, `extractAssumptions()`, `generateNextSteps()`, `generateFollowUpQuestions()`, `clamp()`. These are internal scoring logic, not user-facing text.
  </action>
  <verify>
1. `grep 'fred-brain' lib/fred/actors/decide.ts lib/fred/actors/synthesize.ts` -- both files import from fred-brain
2. `grep 'FRED_BIO' lib/fred/actors/decide.ts lib/fred/actors/synthesize.ts` -- both files reference FRED_BIO
3. `grep "my take" lib/fred/actors/decide.ts` -- Fred's personal language present
4. `grep "straight with you" lib/fred/actors/decide.ts` -- Fred's direct style present
5. `grep "companiesFounded" lib/fred/actors/decide.ts lib/fred/actors/synthesize.ts` -- experience references present
6. `grep -c "Analysis Complete - Decision Required" lib/fred/actors/decide.ts` -- returns 0 (old generic text gone)
7. `grep -c "Based on analysis across" lib/fred/actors/synthesize.ts` -- returns 0 (old generic text gone)
8. `grep -c "This is a balanced decision" lib/fred/actors/synthesize.ts` -- returns 0 (old generic text gone)
9. `npx tsc --noEmit` passes with no errors
10. Verify scoring logic untouched: `git diff lib/fred/actors/synthesize.ts` should show changes ONLY in the import line and `generateRecommendation()` body. All other functions must be byte-identical.
  </verify>
  <done>
VOICE-01 (chat): Both chat pipeline response template files now speak in Fred Cary's voice.
- decide.ts: "recommend" references FRED_BIO.companiesFounded. "escalate" references FRED_BIO.yearsExperience with Fred's direct "Let me be straight with you" style. "clarify" uses warmer mentor tone. "defer" uses casual directness.
- synthesize.ts: High-score recommendations say "go for it" (confident Fred). Medium-score references FRED_BIO.companiesFounded with "you need more data before committing" (practical). Low-score says "I'm going to be honest with you" (Fred's signature honesty). Default uses "Here's the bottom line" (direct).
- All internal scoring logic (calculateFactorScores, calculateHeuristicFactorScores, identifyRisks, etc.) remains completely unchanged.
  </done>
</task>

</tasks>

<verification>
After both tasks complete, run the full voice unification verification:

1. **All files import from fred-brain.ts (directly or via voice.ts):**
   ```bash
   grep -l 'fred-brain\|fred/voice' lib/fred/voice.ts lib/fred/reality-lens.ts lib/fred/irs/engine.ts lib/fred/strategy/generator.ts lib/fred/pitch/analyzers/index.ts lib/fred/actors/decide.ts lib/fred/actors/synthesize.ts
   # Must list all 7 files
   ```

2. **No hardcoded wrong experience year numbers remain:**
   ```bash
   grep -rn '30+ years\|40+ years' lib/fred/reality-lens.ts lib/fred/irs/engine.ts lib/fred/strategy/generator.ts lib/fred/pitch/analyzers/index.ts lib/fred/actors/decide.ts lib/fred/actors/synthesize.ts
   # Must return nothing
   ```

3. **No generic personas remain:**
   ```bash
   grep -c "Founder's Rational Expert Decision-maker" lib/fred/reality-lens.ts  # Must be 0
   grep -c "expert VC analyst" lib/fred/irs/engine.ts  # Must be 0
   ```

4. **Voice utility exports correctly:**
   ```bash
   grep 'export function buildFredVoicePreamble' lib/fred/voice.ts
   ```

5. **Full TypeScript compilation:**
   ```bash
   npx tsc --noEmit
   ```

6. **Tests pass (if any exist):**
   ```bash
   npx vitest run 2>&1 | tail -20
   ```
</verification>

<success_criteria>
- VOICE-01: All 5 core AI engines (7 files) import persona data from fred-brain.ts (directly or via voice.ts)
- VOICE-02: Reality Lens SYSTEM_PROMPT identifies as Fred Cary with credentials via buildFredVoicePreamble, NOT "FRED (Founder's Rational Expert Decision-maker)"
- VOICE-03: IRS getSystemPrompt() identifies as Fred Cary with investor experience via buildFredVoicePreamble, NOT "expert VC analyst"
- VOICE-04: Strategy generator uses FRED_BIO.yearsExperience from fred-brain.ts, no hardcoded experience numbers
- VOICE-05: Pitch analyzer uses FRED_BIO.yearsExperience from fred-brain.ts, no hardcoded experience numbers
- Chat templates in decide.ts and synthesize.ts use Fred's direct voice with experience references
- All scoring guidelines, calibration text, and Zod schemas remain UNCHANGED
- TypeScript compiles with zero errors
</success_criteria>

<output>
After completion, create `.planning/phases/13-voice-core-ai-engines/13-01-SUMMARY.md`
</output>
