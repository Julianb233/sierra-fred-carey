---
phase: 22-pwa-mobile-polish
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - app/pricing/page.tsx
  - components/monitoring/charts/PerformanceCharts.tsx
  - components/admin/voice-agent/KnowledgeBaseEditor.tsx
  - components/admin/voice-agent/BusinessHoursEditor.tsx
  - components/monitoring/DashboardFilters.tsx
  - app/dashboard/monitoring/page.tsx
  - components/diagnostic/InvestorEvaluation.tsx
  - app/dashboard/boardy/page.tsx
  - components/positioning/positioning-assessment.tsx
  - components/investor-lens/investor-lens-evaluation.tsx
  - app/admin/voice-agent/page.tsx
  - app/dashboard/insights/page-enhanced.tsx
  - app/globals.css
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Pricing comparison table renders as cards on 375px viewport with no horizontal scroll"
    - "All TabsList components with 4+ columns scroll horizontally on mobile instead of compressing tabs"
    - "All SelectTrigger elements with fixed pixel widths are responsive (w-full on mobile, fixed on sm+)"
    - "All form inputs, selects, textareas, checkboxes meet 44px minimum touch target"
    - "No page causes horizontal scroll at 375px viewport width"
  artifacts:
    - path: "app/pricing/page.tsx"
      provides: "Mobile card layout for comparison table below 768px, table hidden on mobile"
      contains: "md:hidden"
    - path: "app/globals.css"
      provides: "Extended touch target rule covering input, textarea, select elements"
      contains: "input, textarea, select"
    - path: "app/dashboard/monitoring/page.tsx"
      provides: "Scrollable TabsList wrapper for 4-column tabs"
      contains: "overflow-x-auto"
    - path: "components/monitoring/charts/PerformanceCharts.tsx"
      provides: "Responsive SelectTrigger and scrollable TabsList"
      contains: "w-full sm:w-"
    - path: "app/dashboard/boardy/page.tsx"
      provides: "Scrollable TabsList wrapper for 5-column tabs"
      contains: "overflow-x-auto"
  key_links:
    - from: "app/pricing/page.tsx"
      to: "comparisonFeatures array"
      via: "Card layout maps over same data as table"
      pattern: "comparisonFeatures\\.map"
    - from: "app/globals.css"
      to: "all pages"
      via: "Global touch target rule applies to input, textarea, select"
      pattern: "min-height.*44px"
    - from: "app/dashboard/insights/page.tsx"
      to: "all TabsList fixes"
      via: "Reference implementation of scrollable tabs pattern"
      pattern: "overflow-x-auto.*TabsList|inline-flex.*min-w-full"
---

<objective>
Fix all mobile responsive issues: pricing comparison table mobile layout, fixed-width component audit across 13 files, TabsList scroll pattern for 8 files, and touch target audit for remaining form elements.

Purpose: Every page must render correctly on a 375px viewport (iPhone 12/13/14) with no horizontal overflow and all interactive elements meeting 44px minimum touch targets.

Output: Updated pricing page with card layout, responsive fixed-width fixes across 5 high-priority files, scrollable TabsList wrappers on 8 files, extended global touch target CSS rule.
</objective>

<execution_context>
@/opt/agency-workspace/sierra-fred-carey/.planning/phases/22-pwa-mobile-polish/22-RESEARCH.md
</execution_context>

<context>
@/opt/agency-workspace/sierra-fred-carey/.planning/PROJECT.md
@/opt/agency-workspace/sierra-fred-carey/.planning/ROADMAP.md
@/opt/agency-workspace/sierra-fred-carey/app/pricing/page.tsx
@/opt/agency-workspace/sierra-fred-carey/app/globals.css
@/opt/agency-workspace/sierra-fred-carey/app/dashboard/insights/page.tsx (reference scrollable tabs pattern at line 310-328)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Pricing table mobile layout and fixed-width responsive fixes</name>
  <files>
    app/pricing/page.tsx
    components/monitoring/charts/PerformanceCharts.tsx
    components/admin/voice-agent/KnowledgeBaseEditor.tsx
    components/admin/voice-agent/BusinessHoursEditor.tsx
    components/monitoring/DashboardFilters.tsx
  </files>
  <action>
**1. Fix `app/pricing/page.tsx` -- Pricing comparison table mobile layout (PWA-05):**

In the Comparison Table section (around line 289-364), replace the current `<table>` with a dual-layout approach:

- Wrap the existing `<table>` in `<div className="hidden md:block">` -- table is desktop-only
- Add a new `<div className="md:hidden space-y-3">` sibling BEFORE the hidden table div, inside the same rounded container
- The mobile layout maps over the `comparisonFeatures` array and renders each feature as a card:
  ```
  {comparisonFeatures.map((feature) => (
    <div key={feature.name} className="bg-white dark:bg-gray-950 rounded-xl p-4 border border-gray-200 dark:border-gray-800">
      <h4 className="font-medium text-sm mb-3 text-gray-900 dark:text-white">{feature.name}</h4>
      <div className="grid grid-cols-3 gap-2 text-center">
        <div>
          <span className="text-xs text-gray-500 dark:text-gray-400 block mb-1">Free</span>
          {feature.free ? <CheckIcon .../> : <Cross2Icon .../>}
        </div>
        <div>
          <span className="text-xs text-[#ff6a1a] block mb-1">$99</span>
          {feature.fundraising ? <CheckIcon .../> : <Cross2Icon .../>}
        </div>
        <div>
          <span className="text-xs text-orange-600 block mb-1">$249</span>
          {feature.studio ? <CheckIcon .../> : <Cross2Icon .../>}
        </div>
      </div>
    </div>
  ))}
  ```
- Use the same CheckIcon/Cross2Icon styling as the existing table (orange circle for check, gray for cross)
- Keep the existing `comparisonFeatures` data array unchanged

**2. Fix `components/monitoring/charts/PerformanceCharts.tsx` -- SelectTrigger width (PWA-06, HIGH):**

- Line 47: Change `className="w-[180px]"` to `className="w-full sm:w-[180px]"`
- This is the time range dropdown -- needs to be full-width on mobile

**3. Fix `components/admin/voice-agent/KnowledgeBaseEditor.tsx` -- SelectTrigger width (PWA-06, HIGH):**

- Line 168: Change `className="w-[140px]"` to `className="w-full sm:w-[140px]"`

**4. Fix `components/admin/voice-agent/BusinessHoursEditor.tsx` -- Fixed width values (PWA-06, HIGH):**

- Line 161: The `min-w-[140px]` on a flex container is acceptable (it's a label container inside a flex row) -- verify it doesn't cause overflow. If the parent flex wraps properly at 375px, leave as-is. If it forces horizontal scroll, change to `min-w-0 sm:min-w-[140px]`.
- The SelectTrigger at line 131 already has `w-full sm:w-[240px]` -- this is already responsive, no change needed.

**5. Fix `components/monitoring/DashboardFilters.tsx` -- PopoverContent width (PWA-06, HIGH):**

- Line 171: The `PopoverContent className="w-[280px]"` may overflow on 375px when inside the dashboard sidebar context. Change to `className="w-[calc(100vw-2rem)] sm:w-[280px]"` to ensure it fits within viewport on mobile.
- Lines 127, 239: The SelectTriggers already have `w-full sm:w-[180px]` -- already responsive, no change needed.
- Line 148: The `w-full sm:w-[220px]` is already responsive, no change needed.
  </action>
  <verify>
- `grep "hidden md:block" app/pricing/page.tsx` confirms table is hidden on mobile
- `grep "md:hidden" app/pricing/page.tsx` confirms mobile card layout exists
- `grep 'w-full sm:w-\[180px\]' components/monitoring/charts/PerformanceCharts.tsx` confirms responsive SelectTrigger
- `grep 'w-full sm:w-\[140px\]' components/admin/voice-agent/KnowledgeBaseEditor.tsx` confirms responsive SelectTrigger
- `grep 'calc(100vw' components/monitoring/DashboardFilters.tsx` confirms responsive PopoverContent
- `npm run build` succeeds without errors
  </verify>
  <done>
- Pricing comparison table shows card layout on mobile (below 768px) and table on desktop
- All HIGH priority fixed-width SelectTriggers are responsive (w-full on mobile, fixed on sm+)
- PopoverContent in DashboardFilters fits within 375px viewport
- No horizontal scroll on pricing page or monitoring dashboard at 375px
  </done>
</task>

<task type="auto">
  <name>Task 2: TabsList scrollable wrappers and touch target CSS audit</name>
  <files>
    app/dashboard/monitoring/page.tsx
    components/diagnostic/InvestorEvaluation.tsx
    components/monitoring/charts/PerformanceCharts.tsx
    app/dashboard/boardy/page.tsx
    components/positioning/positioning-assessment.tsx
    components/investor-lens/investor-lens-evaluation.tsx
    app/admin/voice-agent/page.tsx
    app/dashboard/insights/page-enhanced.tsx
    app/globals.css
  </files>
  <action>
**Reference pattern** (from `app/dashboard/insights/page.tsx` lines 310-328 -- the correct scrollable tabs implementation):
```tsx
<div className="overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0">
  <TabsList className="inline-flex w-auto min-w-full sm:min-w-0 sm:grid sm:w-full sm:grid-cols-N lg:w-auto lg:inline-grid">
    <TabsTrigger value="..." className="text-xs sm:text-sm whitespace-nowrap">...</TabsTrigger>
  </TabsList>
</div>
```

Apply this exact pattern to ALL 8 files below. For each file:
1. Wrap the `<TabsList>` in `<div className="overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0">`
2. Replace the `TabsList className` with the inline-flex/grid responsive pattern (adjusting `grid-cols-N` to match existing column count)
3. Add `className="text-xs sm:text-sm whitespace-nowrap"` to each `TabsTrigger` (preserve any existing content like Badges)

**Files to update (8 files):**

1. **`app/dashboard/monitoring/page.tsx`** (line ~414):
   - Current: `<TabsList className="grid w-full max-w-2xl grid-cols-4">`
   - Change to scrollable wrapper + `inline-flex w-auto min-w-full sm:min-w-0 sm:grid sm:w-full sm:max-w-2xl sm:grid-cols-4 lg:w-auto lg:inline-grid`
   - Add `text-xs sm:text-sm whitespace-nowrap` to all 4 TabsTriggers

2. **`components/diagnostic/InvestorEvaluation.tsx`** (line ~205):
   - Current: `<TabsList className="grid w-full grid-cols-4">`
   - Change to scrollable wrapper + `inline-flex w-auto min-w-full sm:min-w-0 sm:grid sm:w-full sm:grid-cols-4 lg:w-auto lg:inline-grid`
   - Add `text-xs sm:text-sm whitespace-nowrap` to all 4 TabsTriggers

3. **`components/monitoring/charts/PerformanceCharts.tsx`** (line ~62):
   - Current: `<TabsList className="grid w-full grid-cols-4">`
   - Same scrollable wrapper pattern with `sm:grid-cols-4`
   - Add responsive text classes to all 4 TabsTriggers

4. **`app/dashboard/boardy/page.tsx`** (line ~266):
   - Current: `<TabsList className="grid w-full grid-cols-5">`
   - Same scrollable wrapper pattern with `sm:grid-cols-5`
   - Add responsive text classes to all 5 TabsTriggers

5. **`components/positioning/positioning-assessment.tsx`** (line ~115):
   - Current: `<TabsList className="grid w-full grid-cols-4">`
   - Same scrollable wrapper pattern with `sm:grid-cols-4`
   - Add responsive text classes to all 4 TabsTriggers

6. **`components/investor-lens/investor-lens-evaluation.tsx`** (line ~170):
   - Current: `<TabsList className="grid w-full grid-cols-5">`
   - Same scrollable wrapper pattern with `sm:grid-cols-5`
   - Add responsive text classes to all 5 TabsTriggers

7. **`app/admin/voice-agent/page.tsx`** (line ~240):
   - Current: `<TabsList className="grid w-full grid-cols-5">`
   - Same scrollable wrapper pattern with `sm:grid-cols-5`
   - Add responsive text classes to all 5 TabsTriggers

8. **`app/dashboard/insights/page-enhanced.tsx`** (line ~303):
   - Current: `<TabsList className="grid w-full grid-cols-4 lg:w-auto lg:inline-grid">` (partially responsive but missing overflow wrapper)
   - Add the overflow-x-auto wrapper div
   - Update TabsList className to full pattern: `inline-flex w-auto min-w-full sm:min-w-0 sm:grid sm:w-full sm:grid-cols-4 lg:w-auto lg:inline-grid`
   - Add `text-xs sm:text-sm whitespace-nowrap` to TabsTriggers if not already present

**Touch target CSS audit (PWA-07):**

Update `app/globals.css` -- extend the existing touch target rule (line 106-108) to cover form elements:

Current rule:
```css
button, a, [role="button"], input[type="button"], input[type="submit"], input[type="reset"] {
  min-height: 44px;
}
```

Change to:
```css
button, a, [role="button"], input[type="button"], input[type="submit"], input[type="reset"],
input[type="text"], input[type="email"], input[type="password"], input[type="search"],
input[type="tel"], input[type="url"], input[type="number"], input[type="date"],
textarea, select, [role="checkbox"], [role="radio"], [role="switch"], [role="tab"] {
  min-height: 44px;
}
```

This ensures ALL interactive form elements and Radix UI primitives (which use role attributes) meet 44px minimum touch target height. The existing `.touch-target` utility class already handles both width and height for icon-only elements.

**Important notes:**
- Do NOT modify `app/dashboard/insights/page.tsx` -- it already has the correct pattern and serves as the reference implementation
- Do NOT modify low-priority files (chat/page.tsx, onboarding/page.tsx, PhoneMockup.tsx, navbar.tsx) -- their fixed-width elements are decorative/contained
- Preserve all existing functionality, content, and Tailwind classes in each file -- only modify the TabsList wrapper and className
  </action>
  <verify>
- `grep -r "overflow-x-auto" app/dashboard/monitoring/page.tsx` confirms scrollable wrapper
- `grep -r "overflow-x-auto" app/dashboard/boardy/page.tsx` confirms scrollable wrapper
- `grep -r "overflow-x-auto" components/diagnostic/InvestorEvaluation.tsx` confirms scrollable wrapper
- `grep -r "overflow-x-auto" components/monitoring/charts/PerformanceCharts.tsx` confirms scrollable wrapper
- `grep -r "overflow-x-auto" components/positioning/positioning-assessment.tsx` confirms scrollable wrapper
- `grep -r "overflow-x-auto" components/investor-lens/investor-lens-evaluation.tsx` confirms scrollable wrapper
- `grep -r "overflow-x-auto" app/admin/voice-agent/page.tsx` confirms scrollable wrapper
- `grep -r "overflow-x-auto" app/dashboard/insights/page-enhanced.tsx` confirms scrollable wrapper
- `grep 'role="checkbox"' app/globals.css` confirms extended touch target rule
- `grep 'role="tab"' app/globals.css` confirms tab touch targets
- `npm run build` succeeds without errors
  </verify>
  <done>
- All 8 TabsList components with 4-5 columns have scrollable horizontal wrappers on mobile
- TabsTriggers use responsive text sizing (text-xs on mobile, text-sm on sm+) with whitespace-nowrap
- Global CSS touch target rule covers all form inputs, textareas, selects, checkboxes, radios, switches, and tabs
- All files build without errors
- No TabsList causes text truncation or compression at 375px viewport
  </done>
</task>

</tasks>

<verification>
1. `npm run build` -- zero errors across all 13 modified files
2. `grep -c "overflow-x-auto" app/dashboard/monitoring/page.tsx app/dashboard/boardy/page.tsx components/diagnostic/InvestorEvaluation.tsx components/monitoring/charts/PerformanceCharts.tsx components/positioning/positioning-assessment.tsx components/investor-lens/investor-lens-evaluation.tsx app/admin/voice-agent/page.tsx app/dashboard/insights/page-enhanced.tsx` -- each file shows at least 1 match
3. `grep "md:hidden" app/pricing/page.tsx` -- confirms mobile card layout
4. `grep "hidden md:block" app/pricing/page.tsx` -- confirms desktop table
5. `grep "role.*tab" app/globals.css` -- confirms extended touch targets
6. `grep "w-full sm:w-" components/monitoring/charts/PerformanceCharts.tsx components/admin/voice-agent/KnowledgeBaseEditor.tsx` -- confirms responsive SelectTriggers
</verification>

<success_criteria>
- Pricing comparison table renders as vertically-stacked cards below 768px and as a table above 768px
- All 5 HIGH priority fixed-width components are responsive (w-full on mobile, fixed on sm+)
- All 8 TabsList components with 4-5 columns use the scrollable horizontal pattern from insights/page.tsx
- Global CSS touch target rule covers all interactive elements (buttons, links, inputs, textareas, selects, checkboxes, radios, switches, tabs) at 44px minimum
- No page produces horizontal scroll at 375px viewport width
- Build passes cleanly with zero errors
</success_criteria>

<output>
After completion, create `.planning/phases/22-pwa-mobile-polish/22-02-SUMMARY.md`
</output>
