---
phase: 69
plan: 01
name: service-marketplace-frontend
type: implementation
autonomous: true
---

## Objective

Build the complete Service Marketplace frontend for Sahara, including provider directory, provider detail, booking modal, my bookings page, FRED chat integration, and sidebar nav update.

## Context

- Phase 68 delivered DB helpers, API routes, and FRED provider-finder tool
- Follow patterns from content/page.tsx (catalog grid), course-card-inline.tsx (inline chat card), chat-message.tsx (tool result integration)
- Zero TypeScript errors, dark mode, mobile responsive

## Tasks

### Task 1: Provider Directory page
- Create `app/dashboard/marketplace/page.tsx`
- Grid of provider cards: logo/avatar, name, tagline, category badge, star rating, review count
- Filter bar: category dropdown + stage filter chips
- Search input debounced, calls /api/marketplace?search=
- Empty state with FRED chat prompt
- Loading skeletons

### Task 2: Provider Detail page
- Create `app/dashboard/marketplace/[slug]/page.tsx`
- Provider header: logo, name, tagline, website link, verified badge
- Description section
- Service listings: price, turnaround, deliverables, "Book Now" button
- Reviews section with star ratings
- "Book This Service" floating/section button opens booking modal

### Task 3: Booking Modal component
- Create `components/marketplace/booking-modal.tsx`
- Select listing (if not pre-selected), add message, submit
- POST /api/marketplace/bookings
- Success toast

### Task 4: My Bookings page
- Create `app/dashboard/marketplace/bookings/page.tsx`
- List user's bookings with status badges (pending/accepted/completed/cancelled)
- Empty state

### Task 5: FRED chat inline provider card
- Create `components/marketplace/provider-card-inline.tsx`
- Compact card for FRED chat: name, category, tagline, rating, link to detail page
- Wire into `lib/hooks/use-fred-chat.ts`: add `providers` field to FredMessage, handle `findProvider` tool_result
- Wire into `components/chat/chat-message.tsx`: render provider cards below message

### Task 6: Sidebar nav update
- Add "Marketplace" to coreNavItems in `app/dashboard/layout.tsx`
- Use ShoppingBag icon from lucide-react
- Position after "Content"

## Verification

- `pnpm build` passes with zero errors
- All pages render without runtime errors (empty DB state handled)
- TypeScript: zero errors in new files

## Success Criteria

- [ ] Provider directory page exists at /dashboard/marketplace
- [ ] Provider detail page exists at /dashboard/marketplace/[slug]
- [ ] Booking modal component exists and submits to API
- [ ] My bookings page exists at /dashboard/marketplace/bookings
- [ ] FRED chat shows provider cards when provider-finder tool runs
- [ ] Marketplace in sidebar nav
- [ ] pnpm build passes
